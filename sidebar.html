<div class="sidebar-logo">
  <img src="logo.png" alt="AL MASAOOD" />
</div>

<nav class="sidebar-menu">
  <a data-permission="view_dashboard" href="dashboard.html">لوحة التحكم</a>
  <a data-permission="manage_vehicles" href="vehicles.html">المركبات</a>
  <a data-permission="manage_drivers" href="drivers.html">السائقين</a>
  <a data-permission="manage_movements" href="movements.html">الحركات</a>
  <a data-permission="manage_maintenance" href="maintenance.html">الصيانة</a>
  <a data-permission="manage_documents" href="documents.html">الوثائق</a>
  <a data-permission="manage_notifications" href="notifications.html">الإشعارات</a>
  <a data-permission="manage_settings" href="settings.html">الإعدادات</a>
  <a data-permission="manage_users" href="users.html">المستخدمين</a>
</nav>

<style>
  .sidebar-logo {
    text-align: center;
    margin-bottom: 25px;
  }

  .sidebar-logo img {
    width: 120px;
    filter: drop-shadow(0 2px 4px #0003);
  }
</style>

<script src="permissions.js"></script>
<script>
  (async function applySidebarPermissions() {
    const role = await getUserRole();
    const allowed = ROLE_PERMISSIONS[role] || [];

    document.querySelectorAll("[data-permission]").forEach(link => {
      const perm = link.getAttribute("data-permission");
      if (!allowed.includes(perm)) {
        link.style.display = "none";
      }
    });
  })();
</script>
