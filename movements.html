    async function saveMovement() {
      const data = {
        vehicle: m_vehicle.value,
        driver: m_driver.value,
        destination: m_destination.value.trim(),
        start: m_start.value
      };

      if (!data.vehicle || !data.driver || !data.destination || !data.start) {
        alert("يرجى إدخال جميع البيانات");
        return;
      }

      if (editId) {
        await updateData("movements/" + editId, data);
      } else {
        await pushData("movements", data);
      }

      closeMovementForm();
    }

    function editMovement(id, vehicle, driver, destination, start) {
      editId = id;
      modalTitle.textContent = "تعديل حركة";
      m_vehicle.value = vehicle;
      m_driver.value = driver;
      m_destination.value = destination;
      m_start.value = start;
      movementModal.classList.remove("hidden");
    }

    async function deleteMovement(id) {
      if (!confirm("هل أنت متأكد من الحذف؟")) return;
      await deleteData("movements/" + id);
    }
  </script>

</body>
</html>
